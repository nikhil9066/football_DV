<!-- <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Interactive World Map with Match Data and City Locations</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background-color: #99ccff; /* Light blue background for the ocean */
      }
      path {
        fill: #ccc;
        stroke: #fff;
        stroke-width: 0.5;
      }
      path:hover {
        fill: rgb(88, 10, 52);
      }
      .country-label {
        font-size: 12px;
        fill: #333;
        pointer-events: none;
      }
      .match-info {
        font-size: 14px;
        fill: #333;
        pointer-events: none;
      }
      .city {
        fill: red;
      }
      .city-info {
        font-size: 12px;
        fill: #333;
        pointer-events: none;
        display: none;
      }
    </style>
  </head>
  <body>
    <svg id="map"></svg>

    <script>
      var geoJSONPath = "world-countries.geojson"; // Specify the path to your GeoJSON file
      var matchDataPath = "data/results.json"; // Specify the path to your match data JSON file

      var svg = d3.select("#map");
      var width = window.innerWidth;
      var height = window.innerHeight;

      svg.attr("width", width).attr("height", height);

      var projection = d3.geoMercator()
        .scale(width / 2 / Math.PI)
        .translate([width / 2, height / 2]);

      var path = d3.geoPath().projection(projection);

      var g = svg.append("g");

      d3.json(geoJSONPath).then(function(world) {
        g.selectAll("path")
          .data(world.features)
          .enter().append("path")
          .attr("d", path)
          .attr("class", "country")
          .on("mouseover", function (d) {
            d3.select(this).attr("fill", "#99ccff");
          })
          .on("mouseout", function (d) {
            d3.select(this).attr("fill", "#ccc");
            g.selectAll(".match-info").remove(); // Remove match information on mouseout
          });

        g.selectAll("text")
          .data(world.features)
          .enter().append("text")
          .attr("class", "country-label")
          .attr("transform", function (d) {
            return "translate(" + path.centroid(d) + ")";
          })
          .attr("dy", "0.35em")
          .text(function (d) {
            return d.properties.name;
          });
      });

      d3.json(matchDataPath).then(function(matches) {
        g.selectAll(".city")
          .data(matches)
          .enter()
          .append("circle")
          .attr("class", "city")
          .attr("cx", function(d) {
            return projection([d.city_longitude, d.city_latitude])[0];
          })
          .attr("cy", function(d) {
            return projection([d.city_longitude, d.city_latitude])[1];
          })
          .attr("r", 4)
          .on("mouseover", function (d) {
            // Display match information when hovering over a city
            d3.select(this).attr("fill", "red");
            var matchInfo = `${d.date}: ${d.home_team} vs. ${d.away_team}`;
            g.append("text")
              .attr("class", "city-info")
              .attr("x", width / 2)
              .attr("y", 20)
              .text(matchInfo);
          })
          .on("mouseout", function (d) {
            // Remove match information when moving the mouse away from a city
            d3.select(this).attr("fill", "red");
            g.selectAll(".city-info").remove();
          });
      });

      svg.call(d3.zoom().on("zoom", function () {
        g.attr("transform", d3.event.transform);
      }));
    </script>
  </body>
</html> -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Interactive World Map with Match Data and Country Locations</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background-color: #99ccff; /* Light blue background for the ocean */
      }
      path {
        fill: #ccc;
        stroke: #fff;
        stroke-width: 0.5;
      }
      path:hover {
        fill: #99ccff;
      }
      .country-label {
        font-size: 12px;
        fill: #333;
        pointer-events: none;
      }
      .match-info {
        font-size: 14px;
        fill: #333;
        pointer-events: none;
      }
      .city {
        fill: red;
      }
      .city-info {
        font-size: 12px;
        fill: #333;
        pointer-events: none;
        display: none;
      }
    </style>
  </head>
  <body>
    <svg id="map"></svg>

    <script>
      var geoJSONPath = "world-countries.geojson"; // Specify the path to your GeoJSON file
      var matchDataPath = "data/results.json"; // Specify the path to your match data JSON file

      var svg = d3.select("#map");
      var width = window.innerWidth;
      var height = window.innerHeight;

      svg.attr("width", width).attr("height", height);

      var projection = d3.geoMercator()
        .scale(width / 2 / Math.PI)
        .translate([width / 2, height / 2]);

      var path = d3.geoPath().projection(projection);

      var g = svg.append("g");

      d3.json(geoJSONPath).then(function(world) {
        g.selectAll("path")
          .data(world.features)
          .enter().append("path")
          .attr("d", path)
          .attr("class", "country")
          .on("mouseover", function (d) {
            d3.select(this).attr("fill", "#99ccff");
          })
          .on("mouseout", function (d) {
            d3.select(this).attr("fill", "#ccc");
            g.selectAll(".match-info").remove(); // Remove match information on mouseout
          });

        g.selectAll("text")
          .data(world.features)
          .enter().append("text")
          .attr("class", "country-label")
          .attr("transform", function (d) {
            return "translate(" + path.centroid(d) + ")";
          })
          .attr("dy", "0.35em")
          .text(function (d) {
            return d.properties.name;
          });
      });

      d3.json(matchDataPath).then(function(matches) {
        g.selectAll(".city")
          .data(matches)
          .enter()
          .append("circle")
          .attr("class", "city")
          .attr("r", 4)
          .on("mouseover", function (d) {
            // Use the centroid of the country as the city position
            var countryName = d.country;
            var country = world.features.find(function (feature) {
              return feature.properties.name === countryName;
            });

            if (country) {
              var centroid = path.centroid(country);
              var [longitude, latitude] = centroid;
              d3.select(this).attr("fill", "red");
              var matchInfo = `${d.date}: ${d.home_team} vs. ${d.away_team}`;
              g.append("text")
                .attr("class", "city-info")
                .attr("x", projection([longitude, latitude])[0])
                .attr("y", projection([longitude, latitude])[1])
                .text(matchInfo);
            }
          })
          .on("mouseout", function (d) {
            // Remove match information when moving the mouse away from a city
            d3.select(this).attr("fill", "red");
            g.selectAll(".city-info").remove();
          });
      });

      svg.call(d3.zoom().on("zoom", function () {
        g.attr("transform", d3.event.transform);
      }));
    </script>
  </body>
</html>
