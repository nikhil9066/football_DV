<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two-Column Layout</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        .container {
            display: flex;
            height: 100vh;
            /* 100% of the viewport height */
        }

        .left-container,
        .right-container {
            flex: 1;
            /* Equal flex distribution for both containers */
            border: 1px solid #ccc;
        }

        .top-section,
        .bottom-section {
            height: 50%;
            /* Each section takes 50% of the container height */
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
        }

        /* Screen 1 */
        .left-container .top-section {
            background-color: #e6f7ff;
            /* Light blue background for Screen 1 */
            position: relative;
            /* Position relative for absolute positioning of D3 SVG */
            text-align: center;
            /* Center the text */
        }

        .left-container .top-section h1 {
            font-size: 2em;
            /* Adjust the font size as needed */
            font-weight: bold;
            /* Make the text bold */
            margin: 0;
            /* Remove default margin */
        }

        /* Screen 2 */
        .left-container .bottom-section {
            background-color: #ccf2ff;
            /* Lighter blue background for Screen 2 */
        }

        /* Screen 3 */
        .right-container .top-section {
            background-color: #ffe6e6;
            /* Light red background for Screen 3 */
            position: relative;
            /* Position relative for absolute positioning of D3 SVG */
            text-align: center;
            /* Center the text */
        }

        .right-container .top-section h1 {
            font-size: 2em;
            /* Adjust the font size as needed */
            font-weight: bold;
            /* Make the text bold */
            margin: 0;
            /* Remove default margin */
        }

        .right-container .bottom-section {
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
        }

        /* Style adjustments for better visualization */
        .left-container,
        .right-container {
            display: flex;
            flex-direction: column;
        }

        /* Additional styles for Screen 5-8 */
        .left-container .bottom-section {
            border-bottom: none;
            /* Remove border at the bottom of Screen 2 */
        }

        .bottom-section {
            border-top: none;
            /* Remove border at the top of Screen 5 */
        }

        /* Screen 4 */
        .right-container .bottom-section {
            background-color: #ffcccc;
            /* Lighter red background for Screen 4 */
        }

        /* Style adjustments for better visualization */
        .left-container,
        .right-container {
            display: flex;
            flex-direction: column;
        }

        /* Additional styles for Screen 5-8 */
        .left-container .bottom-section {
            border-bottom: none;
            /* Remove border at the bottom of Screen 2 */
        }

        .bottom-section {
            border-top: none;
            /* Remove border at the top of Screen 5 */
        }

        /* Screen 5 and 7 */
        .left-container .bottom-section,
        .right-container .bottom-section {
            background-color: #ccffcc;
            /* Light green background for Screen 5 and 7 */
        }

        /* Screen 3 and 7 */
        .right-container .top-section,
        .right-container .bottom-section {
            border-left: none;
            /* Remove border at the left of Screen 3 and 7 */
        }

        /* Remove border at the bottom of Screen 4 and 8 */
        .right-container .bottom-section {
            border-bottom: none;
        }

        /* Adjustments for vertical layout */
        .top-section h1 {
            writing-mode: vertical-rl;
            /* Vertical writing mode */
            transform: rotate(180deg);
            /* Rotate text */
        }

        .top-section h1:after {
            content: '\00a0';
            /* Add non-breaking space to maintain height */
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="left-container">
            <div class="top-section" id="d3-container">
                <h1>Screen 1</h1>
            </div>
            <div class="bottom-section">Screen 2</div>
        </div>
        <div class="right-container">
            <div class="top-section" id="d3-time-series">
                <h1>Time Series Analysis</h1>
            </div>
            <div class="bottom-section">Screen 4</div>
        </div>
    </div>
    <div class="container">
        <div class="left-container">
            <div class="top-section">Screen 5</div>
            <div class="bottom-section">Screen 6</div>
        </div>
        <div class="right-container">
            <div class="top-section">Screen 7</div>
            <div class="bottom-section">Screen 8</div>
        </div>
    </div>

    <!-- Integrate D3 Code -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script>
        // Read data from the JSON file using d3.json
        d3.json('data/result.json').then(data => {
            // Screen 1: Bar Chart
            // Check for NaN values in the data
            const tournamentCounts = d3.map();
            data.forEach(d => {
                const tournament = d.tournament;
                if (!isNaN(tournament)) { // Exclude NaN values
                    tournamentCounts.set(tournament, (tournamentCounts.get(tournament) || 0) + 1);
                }
            });

            const tournamentData = d3.entries(tournamentCounts).map(entry => ({
                tournament: entry.key,
                count: entry.value
            }));

            const colorScale = d3.scaleOrdinal(d3.schemeCategory10);

            const barChartSvg = d3.select('#d3-container').append('svg')
                .attr('width', '100%')
                .attr('height', '100%')
                .append('g')
                .attr('transform', 'translate(50,50)');

            const xScale = d3.scaleBand()
                .domain(tournamentData.map(d => d.tournament))
                .range([0, 800])
                .padding(0.1);

            const yScale = d3.scaleLinear()
                .domain([0, d3.max(tournamentData, d => d.count)])
                .range([400, 0]);

            barChartSvg.selectAll('rect')
                .data(tournamentData)
                .enter()
                .append('rect')
                .attr('x', d => xScale(d.tournament))
                .attr('y', d => yScale(d.count))
                .attr('width', xScale.bandwidth())
                .attr('height', d => Math.max(0, 400 - yScale(d.count)))
                .attr('fill', d => colorScale(d.tournament));

            const xAxis = d3.axisBottom(xScale);
            const yAxis = d3.axisLeft(yScale);

            barChartSvg.append('g')
                .attr('transform', 'translate(0,400)')
                .call(xAxis)
                .selectAll('text')
                .style('text-anchor', 'end')
                .attr('transform', 'rotate(-45)');

            barChartSvg.append('g')
                .call(yAxis);

            barChartSvg.append('text')
                .attr('x', 400)
                .attr('y', 450)
                .attr('text-anchor', 'middle')
                .text('Tournament');

            barChartSvg.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('x', -200)
                .attr('y', -40)
                .attr('text-anchor', 'middle')
                .text('Count');

            // Screen 3: Time Series Analysis
            data.forEach(d => {
                d.date = new Date(d.date);
            });

            const years = data.map(d => d.date.getFullYear());
            const uniqueYears = Array.from(new Set(years));

            const timeSeriesSvg = d3.select('#d3-time-series').append('svg')
                .attr('width', '100%')
                .attr('height', '100%')
                .append('g')
                .attr('transform', 'translate(50,50)');

            const timeSeriesXScale = d3.scaleLinear()
                .domain(d3.extent(uniqueYears))
                .range([0, 800]);

            const timeSeriesYScale = d3.scaleLinear()
                .domain([0, 1]) // Y-axis range for displaying years
                .range([400, 0]);

            timeSeriesSvg.selectAll('text')
                .data(uniqueYears)
                .enter()
                .append('text')
                .attr('x', d => timeSeriesXScale(d))
                .attr('y', 420)
                .attr('text-anchor', 'middle')
                .text(d => d);

            const timeSeriesXAxis = d3.axisBottom(timeSeriesXScale).tickValues(uniqueYears);
            const timeSeriesYAxis = d3.axisLeft(timeSeriesYScale).tickValues([]);

            timeSeriesSvg.append('g')
                .attr('transform', 'translate(0,400)')
                .call(timeSeriesXAxis);

            timeSeriesSvg.append('g')
                .call(timeSeriesYAxis);
        }).catch(error => {
            console.error('Error loading JSON file:', error);
        });
    </script>


</body>

</html>